
- 1,定义![Pasted image 20251001143613.png](<attachments/Pasted image 20251001143613.png>)
有一个叫做robot_state_publisher的节点，他接收urdf文件 + /joint_state话题（urdf文件给定了初始下各个坐标系之间的关系，其实也就是初始状态的tf。然后/joint_state其实就是各个关节现在的角度和其他数据，这表明了在urdf的基础上，运动到哪种状态了。）结合这两个信息，计算出了现在的tf状态并发送出tf话题。
有了这个tf话题，很多功能比如说机械臂控制，导航功能，都能在有了tf的基础上，直接进行实现。


- 2，自己完成这个流程的节点创建（手动）
	（1），先启动robot_state_publisher节点，并且把urdf作为参数输入进去
	![Pasted image 20251001150949.png](<attachments/Pasted image 20251001150949.png>)
	ros2 run robot_state_publisher robot_state_publisher --ros-args -p robot_description:="$(xacro my_robot.urdf)"
	
	（2），再启动joint_state_publisher_gui节点，他会输出joint_state
	![Pasted image 20251001151155.png](<attachments/Pasted image 20251001151155.png>)
	ros2 run joint_state_publisher_gui joint_state_publisher_gui
	
	（3），可以通过rqt看到现在节点情况
	![Pasted image 20251001151258.png](<attachments/Pasted image 20251001151258.png>)
	*/robot_description 像汽车的设计图纸：
    告诉你车有4个轮子、1个方向盘、长宽高多少
    /tf 像汽车的GPS定位：
	告诉你车现在在哪里、方向盘转了多少度、轮子转速
	实际例子：
	/robot_description：机器人有2个轮子，轮子半径10cm
	/tf：左轮现在转了30°，右轮转了25°，机器人朝东北方向*
	
	
	（4），也可以通过启动rviz2来可视化现在的内容
	![Pasted image 20251001151330.png](<attachments/Pasted image 20251001151330.png>)
	点击左下角的add，加入robotmodel和tf这两个功能
	![Pasted image 20251001151535.png](<attachments/Pasted image 20251001151535.png>)
	把这个fixed frame的原来的map改成任意一个目标坐标系，这样tf就能显示出来
	![Pasted image 20251001151630.png](<attachments/Pasted image 20251001151630.png>)
	把robotmodel-——description topic的原来空白，选择成robot_description，这样就能显示出现在的机器人model了
	![Pasted image 20251001151738.png](<attachments/Pasted image 20251001151738.png>)
	![Pasted image 20251001151750.png](<attachments/Pasted image 20251001151750.png>)


- 3，*通过launch文件来启动这个流程*
	[[9 , 启动文件launch file]]配置启动文件包的一些流程在前面已经做过了
	所以这里只需要在my_robot_bringup----launch里面创建一个xml的启动文件就行
	叫做display.launch.xml
	
	然后就是编写xml启动文件
	![Pasted image 20251001165606.png](<attachments/Pasted image 20251001165606.png>)
	(注意，里面涉及到一个rviz配置文件！，这个是对应上面手动流程里面，最后打开rviz之后手动配置的那些步骤，获得这个文件其实就是手动配置好rviz之后，左上角file里面有个保存，把现在的配置保存为urdf_config.rviz，然后我把这个文件创了一个rviz的文件夹放在bringup里面)
	
	(里面有一个command 'xacro $(var urdf_path)'，这个其实是，因为robot_state_publisher这个节点要吃的参数robot_description其实最终是一个urdf，但是我们的文件其实是.xacro文件（类似urdf但是归根到底不是），然后通过xacro命令来把.xacro汇总转换成.urdf文件，然后再喂给节点)
	
	colcon build 一下，然后直接launch这个启动文件就行了
	![Pasted image 20251001163007.png](<attachments/Pasted image 20251001163007.png>)


- 注意：在ROS2的launch.xml文件中，$符号用于变量替换，主要有几种用法：
	
	1：$(find 包名) - 查找包的路径
    - 例如：$(find my_robot_description)
	2： $(var 变量名) - 引用声明的变量
    - 例如：$(var model_file)）
    3： ${变量名} - 引用xacro的变量
    - 例如：${base_length}